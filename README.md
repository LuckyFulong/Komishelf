# Gemini 书架 (Gemini Bookshelf)

Gemini 书架是一个功能丰富的本地漫画管理和阅读系统，旨在帮助用户轻松组织、浏览和阅读存储在本地的漫画文件。它提供了一个直观的Web界面，支持自动扫描、文件监控、多种筛选和排序选项，以及与在线漫画数据同步的能力。

## 功能特性

*   **漫画管理**
    *   **全面的漫画列表:** 支持分页、按收藏、在线、已下载、未下载或自定义文件夹进行筛选，以及按名称或添加日期进行排序。
    *   **详细信息展示:** 查看每本漫画的详细信息，包括封面、标签、阅读进度等。
    *   **自定义显示名称:** 轻松修改漫画的显示名称。
    *   **收藏功能:** 标记您喜爱的漫画，方便快速访问。
    *   **文件夹组织:** 创建和管理自定义文件夹，将漫画分配到不同的分类中。
    *   **灵活的删除选项:** 支持删除单本漫画（将本地文件移至回收站并清理封面），或批量删除多本漫画。
    *   **在线/本地漫画合并:** 将在线漫画的元数据与本地文件合并，实现统一管理。
*   **漫画阅读**
    *   **本地文件阅读:** 直接在Web界面中阅读本地ZIP/CBZ格式的漫画文件。
    *   **阅读进度跟踪:** 自动保存并更新每本漫画的阅读进度。
*   **自动扫描与监控**
    *   **后台扫描:** 首次启动或手动触发时，在后台自动扫描指定文件夹中的漫画文件。
    *   **文件系统监控:** 实时监控指定文件夹，自动检测新增、修改或删除的漫画文件。
    *   **扫描进度显示:** 提供实时的扫描进度反馈。
*   **数据同步**
    *   **Tampermonkey 脚本集成:** 支持与外部 Tampermonkey 脚本同步在线漫画信息（标题、封面、标签），丰富您的漫画库。
*   **文件夹管理**
    *   **创建与编辑:** 轻松创建、更新和删除自定义漫画文件夹。
    *   **智能分类:** 支持根据漫画名称或标签自动将漫画分配到特定文件夹。
    *   **文件夹路径迁移:** 当您的漫画存储路径发生变化时，可以方便地更新配置并自动修正数据库中的漫画路径。
*   **系统维护**
    *   **数据库清理:** 自动清理数据库中指向不存在本地文件的漫画条目。
    *   **封面缓存清理:** 清理不再被任何漫画引用的封面图片，节省存储空间。
    *   **一键清除所有数据:** 提供清除所有漫画数据、标签、文件夹、配置和封面缓存的选项，方便重置应用。
*   **配置管理**
    *   **管理文件夹:** 方便地添加或移除需要扫描和监控的漫画存储文件夹。
    *   **应用设置:** 查看和管理应用的基本配置。
*   **Web 用户界面**
    *   提供一个现代化、响应式的Web界面，方便在任何设备上访问和管理您的漫画。

## 快速开始

### 1. 环境准备

确保您的系统已安装 Python 3.8+ 和 `pip`。

### 2. 安装依赖

在项目根目录下打开命令行，运行以下命令安装所有必要的 Python 依赖：

```bash
pip install -r requirements.txt
```
*(注: `requirements.txt` 文件需要您自行创建，其中应包含 `Flask`, `watchdog`, `send2trash` 等依赖。)*

### 3. 运行应用

```bash
python app/main.py
```

应用启动后，会自动在您的默认浏览器中打开Web界面（通常是 `http://127.0.0.1:5000`）。

### 4. 配置漫画文件夹

首次启动后，您需要在Web界面中添加包含漫画文件的文件夹。应用将自动扫描这些文件夹并将其内容添加到您的漫画库中。

## 使用说明

*   **浏览漫画:** 在主界面浏览您的漫画库，使用搜索、筛选和排序功能找到您想阅读的漫画。
*   **阅读漫画:** 点击漫画封面即可进入阅读界面，应用会自动记录您的阅读进度。
*   **管理漫画:** 通过漫画详情页或批量操作，您可以收藏、编辑、删除漫画或将其分配到不同的文件夹。
*   **管理文件夹:** 在设置页面中，您可以创建、编辑或删除自定义文件夹，并配置自动分类规则。
*   **数据同步:** 如果您使用 Tampermonkey 脚本来收集在线漫画信息，可以通过API接口进行同步。
*   **系统维护:** 定期使用清理功能来保持数据库和封面缓存的整洁。

## 目录结构

```
.
├── app/
│   ├── comics.db             # SQLite 数据库文件
│   ├── config.json           # 应用配置文件
│   ├── config.py             # 配置加载与保存逻辑
│   ├── database.py           # 数据库操作模块
│   ├── main.py               # 应用入口文件
│   ├── routes.py             # Flask 路由和 API 接口
│   ├── scanner.py            # 漫画扫描逻辑
│   ├── watchdog_service.py   # 文件系统监控服务
│   └── web/                  # 前端静态文件 (HTML, CSS, JS)
│       ├── index.html
│       ├── script.js
│       ├── style.css
│       └── covers/           # 漫画封面缓存目录
│           ├── large/
│           ├── medium/
│           └── thumbnail/
├── start.bat                 # Windows 启动脚本 (如果存在)
└── README.md                 # 本说明文件
```

## 注意事项

*   **漫画文件格式:** 目前主要支持 ZIP/CBZ 格式的漫画文件。
*   **安全性:** 请确保您添加的漫画文件夹是可信的，并且不包含敏感或恶意文件。
*   **性能:** 大量漫画文件可能会影响首次扫描和某些操作的性能。

希望您喜欢使用 Gemini 书架！
